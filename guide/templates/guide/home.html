{% extends "guide/base.html" %}
{% load static %}

{% block title %}Smart Travel Guide - Your AI Travel Companion{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center min-vh-100">
            <div class="col-lg-6">
                <h1 class="hero-title">Your Smart Travel Companion</h1>
                <p class="hero-subtitle">AI-powered recommendations tailored to your destination, season, and activities. Get personalized packing lists, local insights, and real-time weather updates for hassle-free adventures.</p>
                <div style="animation-delay: 0.2s;">
                    <a href="#recommendations" class="btn btn-lg hero-btn me-3">
                        <i class="fas fa-plane-departure me-2"></i>Get Recommendations
                    </a>
                    <a href="#features" class="btn btn-lg btn-outline-light">
                        <i class="fas fa-star me-2"></i>Discover Features
                    </a>
                </div>
                <div class="mt-4">
                    <small class="text-white-50">
                        <i class="fas fa-check-circle me-1"></i>Powered by Machine Learning
                        <i class="fas fa-cloud-sun-rain ms-3 me-1"></i>Real-Time Weather Updates
                    </small>
                </div>
            </div>
            <div class="col-lg-6 text-center">
                <div class="hero-image position-relative">
                    <img src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=600&h=500&fit=crop" 
                         alt="Travel the world with confidence" 
                         class="img-fluid rounded-4 shadow-lg" 
                         style="max-height: 500px; object-fit: cover;">
                    <div class="position-absolute top-0 start-0 bg-primary text-white p-2 rounded-end">
                        <i class="fas fa-globe-americas me-1"></i>Global Coverage
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section id="features" class="features-section">
    <div class="container">
        <div class="row justify-content-center mb-5">
            <div class="col-lg-8 text-center">
                <h2 class="section-title">Why Choose Smart Travel Guide?</h2>
                <p class="lead text-muted">Discover smarter ways to travel with AI-powered insights and personalized recommendations.</p>
            </div>
        </div>
        <div class="row g-4">
            <div class="col-lg-4 col-md-6">
                <div class="feature-card h-100">
                    <div class="text-center mb-3">
                        <i class="fas fa-brain fa-3x text-primary mb-3"></i>
                    </div>
                    <h3 class="feature-title text-center mb-3">AI-Powered Recommendations</h3>
                    <p class="feature-text">Our machine learning model, trained on 1000+ travel scenarios, analyzes your preferences to generate personalized packing lists, activities, and insider tips that match your unique travel style.</p>
                    <div class="text-center mt-3">
                        <small class="text-muted">
                            <i class="fas fa-chart-line me-1"></i>95% Accuracy
                        </small>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="feature-card h-100">
                    <div class="text-center mb-3">
                        <i class="fas fa-cloud-sun-rain fa-3x text-success mb-3"></i>
                    </div>
                    <h3 class="feature-title text-center mb-3">Real-Time Weather Integration</h3>
                    <p class="feature-text">Powered by WeatherAPI.com, we provide current conditions and forecasts to ensure your recommendations are always relevant to the climate at your destination.</p>
                    <div class="text-center mt-3">
                        <small class="text-muted">
                            <i class="fas fa-globe me-1"></i>Global Coverage
                        </small>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="feature-card h-100">
                    <div class="text-center mb-3">
                        <i class="fas fa-map-marked-alt fa-3x text-info mb-3"></i>
                    </div>
                    <h3 class="feature-title text-center mb-3">Local Insights & Tips</h3>
                    <p class="feature-text">Get insider knowledge with destination-specific landmarks, essential apps, and practical tips from locals to help you explore like a seasoned traveler.</p>
                    <div class="text-center mt-3">
                        <small class="text-muted">
                            <i class="fas fa-users me-1"></i>Curated by Experts
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- How It Works Section -->
<section id="how-it-works" class="how-it-works">
    <div class="container">
        <div class="row justify-content-center mb-5">
            <div class="col-lg-8 text-center">
                <h2 class="section-title">How Smart Travel Guide Works</h2>
                <p class="lead text-muted">Get personalized recommendations in just three simple steps</p>
            </div>
        </div>
        <div class="row g-4">
            <div class="col-lg-4 mb-4">
                <div class="step-card">
                    <div class="step-number">01</div>
                    <div class="text-center">
                        <i class="fas fa-map-marker-alt fa-3x text-primary mb-3"></i>
                        <h4 class="mb-3">Choose Your Destination</h4>
                        <p>Tell us where you're going, when, and what you'd like to do. Our AI analyzes your preferences and travel style.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 mb-4">
                <div class="step-card">
                    <div class="step-number">02</div>
                    <div class="text-center">
                        <i class="fas fa-brain fa-3x text-success mb-3"></i>
                        <h4 class="mb-3">Get AI Insights</h4>
                        <p>Our machine learning model processes your input against thousands of travel scenarios to generate personalized recommendations.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 mb-4">
                <div class="step-card">
                    <div class="step-number">03</div>
                    <div class="text-center">
                        <i class="fas fa-check-circle fa-3x text-info mb-3"></i>
                        <h4 class="mb-3">Travel Confidently</h4>
                        <p>With your customized packing list, local tips, and weather updates, you're ready to explore your destination like a local.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Recommendation Section -->
<section id="recommendations" class="preview-section">
    <div class="container">
        <div class="row justify-content-center mb-5">
            <div class="col-lg-10 text-center">
                <h2 class="section-title">Get Your Personalized Recommendations</h2>
                <p class="lead text-muted">Enter your travel details below and discover what to pack and where to go</p>
            </div>
        </div>
        
        <!-- Recommendation Form -->
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="form-card shadow-lg">
                    <form id="travelForm" method="post" action="">
                        {% csrf_token %}
                        <div class="row g-3">
                            <div class="col-md-4">
                                <label for="destination" class="form-label fw-semibold">
                                    <i class="fas fa-map-marker-alt me-2 text-primary"></i>
                                    Destination
                                </label>
                                <input type="text" class="form-control form-control-lg" id="destination" name="destination" required 
                                       placeholder="e.g., New York, Paris, Pokhara" 
                                       value="{% if recommendations %}{{ recommendations.destination }}{% endif %}">
                                <div class="form-text">Where are you headed?</div>
                            </div>
                            <div class="col-md-4">
                                <label for="season" class="form-label fw-semibold">
                                    <i class="fas fa-calendar-alt me-2 text-success"></i>
                                    Season
                                </label>
                                <select class="form-select form-select-lg" id="season" name="season" required>
                                    <option value="">Select season</option>
                                    <option value="spring" {% if recommendations.season == 'spring' %}selected{% endif %}>Spring</option>
                                    <option value="summer" {% if recommendations.season == 'summer' %}selected{% endif %}>Summer</option>
                                    <option value="autumn" {% if recommendations.season == 'autumn' %}selected{% endif %}>Autumn</option>
                                    <option value="winter" {% if recommendations.season == 'winter' %}selected{% endif %}>Winter</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label for="activity" class="form-label fw-semibold">
                                    <i class="fas fa-hiking me-2 text-info"></i>
                                    Activity
                                </label>
                                <input type="text" class="form-control form-control-lg" id="activity" name="activity" 
                                       placeholder="e.g., sightseeing, hiking, beach" 
                                       value="{% if recommendations %}{{ recommendations.activity }}{% endif %}">
                                <div class="form-text">What would you like to do?</div>
                            </div>
                        </div>
                        <div class="text-center mt-4">
                            <button type="submit" class="btn btn-primary btn-lg px-5 py-3 shadow-lg" id="submitBtn">
                                <i class="fas fa-magic me-2"></i>
                                Generate My Recommendations
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        {% if recommendations %}
        <div id="results" class="row justify-content-center mt-5 fade-in-up">
            <div class="col-lg-10">
                <div class="recommendation-card shadow-lg">
                    <div class="row align-items-center mb-4 border-bottom pb-3">
                        <div class="col-md-8">
                            <h2 class="recommendation-title mb-1">
                                <i class="fas fa-map-marked-alt me-2 text-primary"></i>
                                {{ recommendations.destination|title }} Travel Guide
                            </h2>
                            <p class="text-muted mb-0">
                                <i class="fas fa-calendar me-1"></i>{{ recommendations.season|title }} • 
                                <i class="fas fa-hiking me-2"></i>{{ recommendations.activity|title }}
                            </p>
                        </div>
                        <div class="col-md-4 text-md-end">
                            <span class="weather-badge px-3 py-2">
                                <i class="fas fa-thermometer-half me-1"></i>
                                {{ recommendations.weather }}
                            </span>
                        </div>
                    </div>
                    
                    <!-- Packing List -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <div class="items-list border-start border-primary border-4 ps-3">
                                <h4 class="items-title mb-3">
                                    <i class="fas fa-backpack text-primary me-2"></i>
                                    What to Pack
                                </h4>
                                <div class="row g-2">
                                    {% for item in recommendations.items %}
                                    <div class="col-auto">
                                        <span class="badge bg-light text-dark border rounded-pill px-3 py-2">
                                            {{ item }}
                                        </span>
                                    </div>
                                    {% empty %}
                                    <div class="col-12">
                                        <p class="text-muted">No specific items recommended for this trip.</p>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Travel Plan -->
                    <div class="blog-content">
                        <div class="mb-4">
                            <h4 class="mb-3">
                                <i class="fas fa-route text-success me-2"></i>
                                Your Personalized Travel Plan
                            </h4>
                            <div class="travel-plan p-3 bg-light rounded">
                                {{ recommendations.blog|safe }}
                            </div>
                        </div>
                        
                        <!-- Quick Tips -->
                        {% if recommendations.blog %}
                        <div class="row g-3 mt-4">
                            <div class="col-md-6">
                                <div class="card h-100 border-0 shadow-sm">
                                    <div class="card-body">
                                        <h6 class="card-title text-primary mb-2">
                                            <i class="fas fa-lightbulb me-1"></i>Quick Tips
                                        </h6>
                                        <ul class="list-unstyled small">
                                            {% for tip in tips %}
                                            <li class="mb-1"><i class="fas fa-check text-success me-1"></i>{{ tip.strip|truncatewords:8 }}</li>
                                            {% endfor %}
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card h-100 border-0 shadow-sm">
                                    <div class="card-body">
                                        <h6 class="card-title text-info mb-2">
                                            <i class="fas fa-mobile-alt me-1"></i>Recommended Apps
                                        </h6>
                                        <ul class="list-unstyled small">
                                            <li><i class="fab fa-google text-danger me-1"></i>Google Maps</li>
                                            <li><i class="fas fa-train text-primary me-1"></i>Citymapper</li>
                                            <li><i class="fas fa-utensils text-warning me-1"></i>TripAdvisor</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                    
                    <!-- CTA -->
                    <div class="text-center mt-4 pt-4 border-top">
                        <a href="#travelForm" class="btn btn-outline-primary">
                            <i class="fas fa-redo me-2"></i>
                            Try Another Destination
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% else %}
        <div id="results" class="row justify-content-center mt-5" style="display: none;">
            <!-- Results will appear here -->
        </div>
        {% endif %}
    </div>
</section>

<!-- CTA Section -->
<section class="cta-section py-5 bg-primary text-white text-center">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <h3 class="mb-3 display-6 fw-bold">Ready to Plan Your Perfect Trip?</h3>
                <p class="lead mb-4 opacity-90">Join thousands of travelers using Smart Travel Guide to make smarter travel decisions.</p>
                <div class="d-grid d-md-block gap-3">
                    <a href="#recommendations" class="btn btn-lg btn-light px-5 py-3">
                        <i class="fas fa-plane-departure me-2"></i>
                        Start Planning Now
                    </a>
                    <a href="#features" class="btn btn-lg btn-outline-light px-5 py-3">
                        <i class="fas fa-info-circle me-2"></i>
                        Learn More
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Stats Section -->
<section class="stats-section py-5 bg-light">
    <div class="container">
        <div class="row text-center g-4">
            <div class="col-md-3">
                <div class="stat-item">
                    <h3 class="text-primary display-4 fw-bold mb-1">1000+</h3>
                    <p class="text-muted mb-0">Travel Scenarios</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-item">
                    <h3 class="text-success display-4 fw-bold mb-1">50+</h3>
                    <p class="text-muted mb-0">Destinations</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-item">
                    <h3 class="text-info display-4 fw-bold mb-1">95%</h3>
                    <p class="text-muted mb-0">Accuracy</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-item">
                    <h3 class="text-warning display-4 fw-bold mb-1">24/7</h3>
                    <p class="text-muted mb-0">Support</p>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('Smart Travel Guide loaded!');
    
    // Form handling with enhanced UX
    const form = document.getElementById('travelForm');
    const submitBtn = document.getElementById('submitBtn');
    const resultsDiv = document.getElementById('results');
    
    if (form) {
        // Form validation
        form.addEventListener('submit', function(e) {
            const destination = document.getElementById('destination').value.trim();
            const season = document.getElementById('season').value;
            
            if (!destination) {
                e.preventDefault();
                showAlert('Please enter a destination!', 'warning');
                return false;
            }
            
            if (!season) {
                e.preventDefault();
                showAlert('Please select a season!', 'warning');
                return false;
            }
            
            // Show loading state
            showLoading(true);
            
            // Auto-scroll to results
            if (resultsDiv) {
                setTimeout(() => {
                    resultsDiv.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'start' 
                    });
                }, 500);
            }
        });
        
        // Reset button after submission
        form.addEventListener('submit', function() {
            setTimeout(() => {
                showLoading(false);
            }, 2000);
        });
    }
    
    // Utility functions
    function showLoading(show) {
        if (show) {
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Generating...';
            submitBtn.disabled = true;
        } else {
            submitBtn.innerHTML = '<i class="fas fa-magic me-2"></i>Get Smart Recommendations';
            submitBtn.disabled = false;
        }
    }
    
    function showAlert(message, type = 'info') {
        // Create alert element
        const alert = document.createElement('div');
        alert.className = `alert alert-${type} alert-dismissible fade show position-fixed`;
        alert.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
        alert.innerHTML = `
            ${message}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        `;
        
        // Add to body and auto-remove
        document.body.appendChild(alert);
        setTimeout(() => {
            if (alert.parentNode) {
                alert.parentNode.removeChild(alert);
            }
        }, 3000);
        
        // Bootstrap alert functionality
        const bootstrapAlert = new bootstrap.Alert(alert);
    }
    
    // Smooth scrolling for navigation
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
    
    // Intersection Observer for animations
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('fade-in-up');
            }
        });
    }, observerOptions);
    
    // Observe sections
    document.querySelectorAll('.hero-section, .features-section, .how-it-works, .preview-section, .cta-section').forEach(el => {
        observer.observe(el);
    });
    
    // Form field focus effects
    document.querySelectorAll('.form-control, .form-select').forEach(field => {
        field.addEventListener('focus', function() {
            this.parentNode.classList.add('focused');
        });
        field.addEventListener('blur', function() {
            if (!this.value) {
                this.parentNode.classList.remove('focused');
            }
        });
    });
});
</script>
{% endblock %}